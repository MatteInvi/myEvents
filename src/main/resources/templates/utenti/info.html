<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">

<head th:replace="~{fragments/head :: head('Home')}"></head>

<body>
    <nav th:replace="~{fragments/navbar :: nav}"></nav>
    <main class="contenitore">
        <div class="info_utente" th:object="${user}">

            <h5 class="titolo">Informazioni utente</h5>

            <img th:src="*{linkProfilePhoto}" class="profile-photo">


            <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                Carica foto profilo               
            </button>
             <h4 style="color: red;" th:text="${error}"></h4>
             <h4 style="color: green" th:text="${success}"></h4>


            <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
                aria-labelledby="staticBackdropLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="staticBackdropLabel">Carica foto profilo</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form method="post" th:action="@{/user/profilePhoto}"  enctype="multipart/form-data">
                                <input class="form-control" type="file" name="file" id="fileInput" accept="image/*">
                                <button class="btn btn-primary my-2" type="submit">Carica</button>
                            </form>
                        </div>

                    </div>
                </div>
            </div>

            <ul class="list_info">
                <li class="elemento_lista"><strong>ID: </strong>[[*{id}]]</li>
                <li class="elemento_lista"><strong>Nome: </strong>[[*{name}]]</li>
                <li class="elemento_lista"><strong>Cognome: </strong>[[*{surname}]]</li>
                <li class="elemento_lista"><strong>Email: </strong>[[*{email}]]</li>
                <li class="elemento_lista"><strong>Ruolo: </strong>
                    <span th:each="role : ${user.roles}">[[${role.nome}]] </span>
                </li>

                <li sec:authorize="hasAuthority('USER')" class="elemento_lista"><strong>Link invito: </strong>
                    <a th:if="*{linkInvite}" th:href="*{linkInvite}" target="_blank">Apri</a>
                    <p class="d-inline" th:unless="*{linkInvite}">Carica la foto <a
                            th:href="@{|/photo/upload/invite|}">QUI</a></p>

                </li>
                <li class="elemento_lista" sec:authorize="hasAuthority('ADMIN')">
                    <p class="mb-0" th:if="*{linkInvite}"><strong>Link invito: </strong>[[*{linkInvite}]]</p>
                    <p class="mb-0" th:unless="*{linkInvite}">Non Ã¨ stato caricato nessun invito!</p>
                </li>
                <li class="elemento_lista"><strong>Link per salvare le foto: <a
                            href=""></a></strong>[[*{linkPhotoUpload}]]</li>
                <li class="elemento_lista"><a class="btn btn-warning" th:href="@{|/user/edit/*{id}|}">Modifica</a></li>
            </ul>

        </div>

    </main>


    <th:block th:insert="~{fragments/footer :: script}"></th:block>

</body>

</html>